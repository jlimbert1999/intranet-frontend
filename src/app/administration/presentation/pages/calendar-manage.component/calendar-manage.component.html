<p-toast position="bottom-right"></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="p-4 bg-white shadow-lg rounded-lg">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-3xl font-bold text-gray-800 uppercase">GESTIÓN DE CALENDARIO</h2>

    <p-button
      label="Agregar Evento"
      icon="pi pi-plus"
      iconPos="left"
      size="large"
      (onClick)="openCreateDialog()"
      styleClass="p-button-primary p-button-sm"
    ></p-button>
  </div>

  <div class="mb-4">
    <search-input
      [label]="'BUSCAR FESTIVIDAD O NOMBRE'"
      (search)="onSearch($event)"
    ></search-input>
  </div>

  <div class="card p-0">
    <p-table
      [value]="filteredEventsList()"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5,10,20]"
      [tableStyle]="{'min-width':'50rem'}"
      dataKey="id"
      [stripedRows]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>TÍTULO</th>
          <th>INICIO</th>
          <th>FIN</th>
          <th>TODO EL DÍA</th>
          <th>TIPO</th>
          <th>ACCIONES</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-event>
        <tr>
          <td>{{ event.title | uppercase }}</td>
          <td>{{ formatDate(event.start) | uppercase }}</td>
          <td>{{ event.end ? (formatDate(event.end) | uppercase) : '-' }}</td>
          <td>{{ event.allDay ? 'SÍ' : 'NO' }}</td>
          <td>{{ event.rrule ? 'RECURRENTE' : 'ÚNICO' }}</td>
          <td>
            <p-button
              icon="pi pi-pencil"
              styleClass="p-button-text p-mr-2"
              (onClick)="openEditDialog(event)"
            ></p-button>
            <p-button
              icon="pi pi-trash"
              styleClass="p-button-text p-button-danger"
              (onClick)="confirmDelete(event)"
            ></p-button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">NO HAY EVENTOS REGISTRADOS.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
